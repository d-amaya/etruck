{"version":"tree-0.1","tree":{"id":"App","path":"","constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.224.0"},"children":{"HaulHub-Auth-dev":{"id":"HaulHub-Auth-dev","path":"HaulHub-Auth-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.224.0"},"children":{"UserPool":{"id":"UserPool","path":"HaulHub-Auth-dev/UserPool","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.224.0","metadata":[]},"children":{"smsRole":{"id":"smsRole","path":"HaulHub-Auth-dev/UserPool/smsRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.224.0","metadata":[]},"children":{"ImportsmsRole":{"id":"ImportsmsRole","path":"HaulHub-Auth-dev/UserPool/smsRole/ImportsmsRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.224.0","metadata":[]}},"Resource":{"id":"Resource","path":"HaulHub-Auth-dev/UserPool/smsRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Condition":{"StringEquals":{"sts:ExternalId":"HaulHubAuthdevUserPoolCE3E652C"}},"Effect":"Allow","Principal":{"Service":"cognito-idp.amazonaws.com"}}],"Version":"2012-10-17"},"policies":[{"policyName":"sns-publish","policyDocument":{"Statement":[{"Action":"sns:Publish","Effect":"Allow","Resource":"*"}],"Version":"2012-10-17"}}],"tags":[{"key":"Component","value":"Authentication"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"HaulHub"}]}}}}},"Resource":{"id":"Resource","path":"HaulHub-Auth-dev/UserPool/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_email","priority":1}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false,"inviteMessageTemplate":{"emailMessage":"Hello {username}, your temporary password is {####}","emailSubject":"Welcome to HaulHub!"}},"autoVerifiedAttributes":["email"],"emailConfiguration":{"emailSendingAccount":"COGNITO_DEFAULT"},"enabledMfas":["SMS_MFA","SOFTWARE_TOKEN_MFA"],"mfaConfiguration":"OPTIONAL","policies":{"passwordPolicy":{"temporaryPasswordValidityDays":7,"minimumLength":8,"requireLowercase":true,"requireUppercase":true,"requireNumbers":true,"requireSymbols":false}},"schema":[{"name":"email","mutable":true,"required":true},{"name":"phone_number","mutable":true,"required":false},{"name":"name","mutable":true,"required":false},{"name":"role","attributeDataType":"String","mutable":false}],"smsConfiguration":{"externalId":"HaulHubAuthdevUserPoolCE3E652C","snsCallerArn":{"Fn::GetAtt":["UserPoolsmsRole4EA729DD","Arn"]}},"smsVerificationMessage":"The verification code to your new account is {####}","userPoolTags":{"Component":"Authentication","Environment":"dev","ManagedBy":"CDK","Project":"HaulHub"},"usernameAttributes":["email"],"userPoolName":"HaulHub-UserPool-dev","verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_LINK","emailMessageByLink":"Hello, please verify your email by clicking this link: {##Verify Email##}","emailSubjectByLink":"Verify your email for HaulHub","smsMessage":"The verification code to your new account is {####}"}}}}}},"UserPoolClient":{"id":"UserPoolClient","path":"HaulHub-Auth-dev/UserPoolClient","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Auth-dev/UserPoolClient/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"accessTokenValidity":60,"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"clientName":"HaulHub-UserPoolClient-dev","enableTokenRevocation":true,"explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"generateSecret":false,"idTokenValidity":60,"preventUserExistenceErrors":"ENABLED","readAttributes":["custom:role","email","email_verified","name","phone_number","phone_number_verified"],"refreshTokenValidity":525600,"supportedIdentityProviders":["COGNITO"],"tokenValidityUnits":{"idToken":"minutes","accessToken":"minutes","refreshToken":"minutes"},"userPoolId":{"Ref":"UserPool6BA7E5F2"},"writeAttributes":["email","name","phone_number"]}}}}},"DispatcherGroup":{"id":"DispatcherGroup","path":"HaulHub-Auth-dev/DispatcherGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"Dispatchers who manage transportation deals and coordinate lorries and drivers","groupName":"Dispatcher","precedence":1,"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"LorryOwnerGroup":{"id":"LorryOwnerGroup","path":"HaulHub-Auth-dev/LorryOwnerGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"Lorry owners who provide vehicles for transportation services","groupName":"LorryOwner","precedence":2,"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"DriverGroup":{"id":"DriverGroup","path":"HaulHub-Auth-dev/DriverGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"Drivers who operate lorries to complete transportation trips","groupName":"Driver","precedence":3,"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"AdminGroup":{"id":"AdminGroup","path":"HaulHub-Auth-dev/AdminGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolGroup","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolGroup","aws:cdk:cloudformation:props":{"description":"System administrators who manage verifications and broker lists","groupName":"Admin","precedence":0,"userPoolId":{"Ref":"UserPool6BA7E5F2"}}}},"UserPoolId":{"id":"UserPoolId","path":"HaulHub-Auth-dev/UserPoolId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"UserPoolArn":{"id":"UserPoolArn","path":"HaulHub-Auth-dev/UserPoolArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"UserPoolClientId":{"id":"UserPoolClientId","path":"HaulHub-Auth-dev/UserPoolClientId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"UserPoolDomain":{"id":"UserPoolDomain","path":"HaulHub-Auth-dev/UserPoolDomain","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"HaulHub-Auth-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"HaulHub-Auth-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.224.0"}}}},"Exports":{"id":"Exports","path":"HaulHub-Auth-dev/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"UserPool6BA7E5F2\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"UserPool6BA7E5F2\",\"Arn\"]}","path":"HaulHub-Auth-dev/Exports/Output{\"Fn::GetAtt\":[\"UserPool6BA7E5F2\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"Output{\"Ref\":\"UserPool6BA7E5F2\"}":{"id":"Output{\"Ref\":\"UserPool6BA7E5F2\"}","path":"HaulHub-Auth-dev/Exports/Output{\"Ref\":\"UserPool6BA7E5F2\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"HaulHub-Auth-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.224.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"HaulHub-Auth-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.224.0"}}}},"HaulHub-Database-dev":{"id":"HaulHub-Database-dev","path":"HaulHub-Database-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.224.0"},"children":{"HaulHubTable":{"id":"HaulHubTable","path":"HaulHub-Database-dev/HaulHubTable","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Database-dev/HaulHubTable/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"PK","attributeType":"S"},{"attributeName":"SK","attributeType":"S"},{"attributeName":"GSI1PK","attributeType":"S"},{"attributeName":"GSI1SK","attributeType":"S"},{"attributeName":"GSI2PK","attributeType":"S"},{"attributeName":"GSI2SK","attributeType":"S"},{"attributeName":"GSI3PK","attributeType":"S"},{"attributeName":"GSI3SK","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"GSI1","keySchema":[{"attributeName":"GSI1PK","keyType":"HASH"},{"attributeName":"GSI1SK","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"GSI2","keySchema":[{"attributeName":"GSI2PK","keyType":"HASH"},{"attributeName":"GSI2SK","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}},{"indexName":"GSI3","keySchema":[{"attributeName":"GSI3PK","keyType":"HASH"},{"attributeName":"GSI3SK","keyType":"RANGE"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"PK","keyType":"HASH"},{"attributeName":"SK","keyType":"RANGE"}],"pointInTimeRecoverySpecification":{"pointInTimeRecoveryEnabled":false},"sseSpecification":{"sseEnabled":true},"streamSpecification":{"streamViewType":"NEW_AND_OLD_IMAGES"},"tableName":"HaulHub-Table-dev","tags":[{"key":"Component","value":"Database"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"HaulHub"}],"timeToLiveSpecification":{"attributeName":"ttl","enabled":true}}}},"ScalingRole":{"id":"ScalingRole","path":"HaulHub-Database-dev/HaulHubTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.224.0","metadata":[]}}}},"TableName":{"id":"TableName","path":"HaulHub-Database-dev/TableName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"TableArn":{"id":"TableArn","path":"HaulHub-Database-dev/TableArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"TableStreamArn":{"id":"TableStreamArn","path":"HaulHub-Database-dev/TableStreamArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"GSI1IndexName":{"id":"GSI1IndexName","path":"HaulHub-Database-dev/GSI1IndexName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"GSI2IndexName":{"id":"GSI2IndexName","path":"HaulHub-Database-dev/GSI2IndexName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"GSI3IndexName":{"id":"GSI3IndexName","path":"HaulHub-Database-dev/GSI3IndexName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"HaulHub-Database-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"HaulHub-Database-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.224.0"}}}},"Exports":{"id":"Exports","path":"HaulHub-Database-dev/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"HaulHubTable967E0CC2\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"HaulHubTable967E0CC2\",\"Arn\"]}","path":"HaulHub-Database-dev/Exports/Output{\"Fn::GetAtt\":[\"HaulHubTable967E0CC2\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"Output{\"Ref\":\"HaulHubTable967E0CC2\"}":{"id":"Output{\"Ref\":\"HaulHubTable967E0CC2\"}","path":"HaulHub-Database-dev/Exports/Output{\"Ref\":\"HaulHubTable967E0CC2\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"HaulHub-Database-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.224.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"HaulHub-Database-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.224.0"}}}},"HaulHub-Storage-dev":{"id":"HaulHub-Storage-dev","path":"HaulHub-Storage-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.224.0"},"children":{"DocumentsBucket":{"id":"DocumentsBucket","path":"HaulHub-Storage-dev/DocumentsBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Storage-dev/DocumentsBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"haulhub-documents-dev","corsConfiguration":{"corsRules":[{"maxAge":3000,"allowedHeaders":["*"],"allowedMethods":["GET","PUT","POST","HEAD"],"allowedOrigins":["*"],"exposedHeaders":["ETag","x-amz-server-side-encryption","x-amz-request-id","x-amz-id-2"]}]},"lifecycleConfiguration":{"rules":[{"id":"TransitionToIA","status":"Disabled","transitions":[{"storageClass":"STANDARD_IA","transitionInDays":90}]},{"id":"DeleteOldVersions","noncurrentVersionExpiration":{"noncurrentDays":90},"status":"Enabled"}]},"publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"Component","value":"Storage"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"HaulHub"},{"key":"Purpose","value":"VerificationDocuments"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"HaulHub-Storage-dev/DocumentsBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Storage-dev/DocumentsBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"DocumentsBucket9EC9DEB9"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["DocumentsBucket9EC9DEB9","Arn"]},"/*"]]}]}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"HaulHub-Storage-dev/DocumentsBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.224.0","metadata":[]},"children":{"Default":{"id":"Default","path":"HaulHub-Storage-dev/DocumentsBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.224.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"HaulHub-Storage-dev/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.224.0"},"children":{"Staging":{"id":"Staging","path":"HaulHub-Storage-dev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.224.0"}},"Role":{"id":"Role","path":"HaulHub-Storage-dev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.224.0"}},"Handler":{"id":"Handler","path":"HaulHub-Storage-dev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.224.0"}}}},"DocumentsBucketName":{"id":"DocumentsBucketName","path":"HaulHub-Storage-dev/DocumentsBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"DocumentsBucketArn":{"id":"DocumentsBucketArn","path":"HaulHub-Storage-dev/DocumentsBucketArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"HaulHub-Storage-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"HaulHub-Storage-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.224.0"}}}},"Exports":{"id":"Exports","path":"HaulHub-Storage-dev/Exports","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Output{\"Fn::GetAtt\":[\"DocumentsBucket9EC9DEB9\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"DocumentsBucket9EC9DEB9\",\"Arn\"]}","path":"HaulHub-Storage-dev/Exports/Output{\"Fn::GetAtt\":[\"DocumentsBucket9EC9DEB9\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"Output{\"Ref\":\"DocumentsBucket9EC9DEB9\"}":{"id":"Output{\"Ref\":\"DocumentsBucket9EC9DEB9\"}","path":"HaulHub-Storage-dev/Exports/Output{\"Ref\":\"DocumentsBucket9EC9DEB9\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"HaulHub-Storage-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.224.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"HaulHub-Storage-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.224.0"}}}},"HaulHub-Api-dev":{"id":"HaulHub-Api-dev","path":"HaulHub-Api-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.224.0"},"children":{"LambdaExecutionRole":{"id":"LambdaExecutionRole","path":"HaulHub-Api-dev/LambdaExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.224.0","metadata":[]},"children":{"ImportLambdaExecutionRole":{"id":"ImportLambdaExecutionRole","path":"HaulHub-Api-dev/LambdaExecutionRole/ImportLambdaExecutionRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.224.0","metadata":[]}},"Resource":{"id":"Resource","path":"HaulHub-Api-dev/LambdaExecutionRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"description":"Execution role for HaulHub backend Lambda function","managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}],"roleName":"HaulHub-LambdaExecutionRole-dev","tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"HaulHub"}]}}},"DefaultPolicy":{"id":"DefaultPolicy","path":"HaulHub-Api-dev/LambdaExecutionRole/DefaultPolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Api-dev/LambdaExecutionRole/DefaultPolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:DeleteItem","dynamodb:GetItem","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"HaulHub-Database-dev:ExportsOutputFnGetAttHaulHubTable967E0CC2Arn25F48F3B"},{"Fn::Join":["",[{"Fn::ImportValue":"HaulHub-Database-dev:ExportsOutputFnGetAttHaulHubTable967E0CC2Arn25F48F3B"},"/index/*"]]}]},{"Action":["s3:DeleteObject","s3:GetObject","s3:PutObject"],"Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::ImportValue":"HaulHub-Storage-dev:ExportsOutputFnGetAttDocumentsBucket9EC9DEB9ArnEA5095A7"},"/*"]]}},{"Action":["cognito-idp:AdminAddUserToGroup","cognito-idp:AdminCreateUser","cognito-idp:AdminGetUser","cognito-idp:AdminInitiateAuth","cognito-idp:AdminSetUserPassword","cognito-idp:AdminUpdateUserAttributes","cognito-idp:ListUsers"],"Effect":"Allow","Resource":{"Fn::ImportValue":"HaulHub-Auth-dev:ExportsOutputFnGetAttUserPool6BA7E5F2Arn686ACC00"}}],"Version":"2012-10-17"},"policyName":"LambdaExecutionRoleDefaultPolicy6D69732F","roles":[{"Ref":"LambdaExecutionRoleD5C26073"}]}}}}}}},"BackendFunctionLogGroup":{"id":"BackendFunctionLogGroup","path":"HaulHub-Api-dev/BackendFunctionLogGroup","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.LogGroup","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Api-dev/BackendFunctionLogGroup/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_logs.CfnLogGroup","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Logs::LogGroup","aws:cdk:cloudformation:props":{"logGroupName":"/aws/lambda/HaulHub-BackendFunction-dev","retentionInDays":7,"tags":[{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"HaulHub"}]}}}}},"BackendFunction":{"id":"BackendFunction","path":"HaulHub-Api-dev/BackendFunction","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.Function","version":"2.224.0","metadata":[]},"children":{"Code":{"id":"Code","path":"HaulHub-Api-dev/BackendFunction/Code","constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.224.0"},"children":{"Stage":{"id":"Stage","path":"HaulHub-Api-dev/BackendFunction/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.224.0"}},"AssetBucket":{"id":"AssetBucket","path":"HaulHub-Api-dev/BackendFunction/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.224.0","metadata":[]}}}},"Resource":{"id":"Resource","path":"HaulHub-Api-dev/BackendFunction/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-131451030564-us-east-1","s3Key":"585c49e01bd23b1b066c825b175afaed09d15c99535ef4a375c490a841371748.zip"},"description":"HaulHub Backend API (NestJS)","environment":{"variables":{"NODE_ENV":"dev","DYNAMODB_TABLE_NAME":{"Fn::ImportValue":"HaulHub-Database-dev:ExportsOutputRefHaulHubTable967E0CC2984C6E0C"},"COGNITO_USER_POOL_ID":{"Fn::ImportValue":"HaulHub-Auth-dev:ExportsOutputRefUserPool6BA7E5F296FD7236"},"DOCUMENTS_BUCKET_NAME":{"Fn::ImportValue":"HaulHub-Storage-dev:ExportsOutputRefDocumentsBucket9EC9DEB9131399C0"},"ALLOWED_ORIGINS":"https://d23ld7dtwui8dz.cloudfront.net","AWS_NODEJS_CONNECTION_REUSE_ENABLED":"1"}},"functionName":"HaulHub-BackendFunction-dev","handler":"haulhub-backend/src/lambda.handler","loggingConfig":{"logGroup":{"Ref":"BackendFunctionLogGroupDF51B4F8"}},"memorySize":512,"role":{"Fn::GetAtt":["LambdaExecutionRoleD5C26073","Arn"]},"runtime":"nodejs20.x","tags":[{"key":"Component","value":"Backend"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"HaulHub"}],"timeout":30}}}}},"RestApi":{"id":"RestApi","path":"HaulHub-Api-dev/RestApi","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Api-dev/RestApi/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"description":"HaulHub Backend REST API","endpointConfiguration":{"types":["EDGE"]},"name":"HaulHub-RestApi-dev","tags":[{"key":"Component","value":"API"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"HaulHub"}]}}},"CloudWatchRole":{"id":"CloudWatchRole","path":"HaulHub-Api-dev/RestApi/CloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.224.0","metadata":[]},"children":{"ImportCloudWatchRole":{"id":"ImportCloudWatchRole","path":"HaulHub-Api-dev/RestApi/CloudWatchRole/ImportCloudWatchRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.224.0","metadata":[]}},"Resource":{"id":"Resource","path":"HaulHub-Api-dev/RestApi/CloudWatchRole/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"apigateway.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AmazonAPIGatewayPushToCloudWatchLogs"]]}],"tags":[{"key":"Component","value":"API"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"HaulHub"}]}}}}},"Account":{"id":"Account","path":"HaulHub-Api-dev/RestApi/Account","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAccount","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Account","aws:cdk:cloudformation:props":{"cloudWatchRoleArn":{"Fn::GetAtt":["RestApiCloudWatchRoleE3ED6605","Arn"]}}}},"Deployment":{"id":"Deployment","path":"HaulHub-Api-dev/RestApi/Deployment","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Api-dev/RestApi/Deployment/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"HaulHub Backend REST API","restApiId":{"Ref":"RestApi0C43BF4B"}}}}}},"DeploymentStage.dev":{"id":"DeploymentStage.dev","path":"HaulHub-Api-dev/RestApi/DeploymentStage.dev","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Api-dev/RestApi/DeploymentStage.dev/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"RestApiDeployment180EC50348e9928cafa0b0870c4e5b1ec9e1df49"},"methodSettings":[{"httpMethod":"*","resourcePath":"/*","dataTraceEnabled":false,"loggingLevel":"ERROR","metricsEnabled":true,"throttlingBurstLimit":2000,"throttlingRateLimit":1000}],"restApiId":{"Ref":"RestApi0C43BF4B"},"stageName":"dev","tags":[{"key":"Component","value":"API"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"HaulHub"}]}}}}},"Endpoint":{"id":"Endpoint","path":"HaulHub-Api-dev/RestApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"Default":{"id":"Default","path":"HaulHub-Api-dev/RestApi/Default","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.224.0","metadata":[]},"children":{"OPTIONS":{"id":"OPTIONS","path":"HaulHub-Api-dev/RestApi/Default/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Api-dev/RestApi/Default/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'https://d23ld7dtwui8dz.cloudfront.net'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'","method.response.header.Access-Control-Max-Age":"'3600'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Fn::GetAtt":["RestApi0C43BF4B","RootResourceId"]},"restApiId":{"Ref":"RestApi0C43BF4B"}}}}}},"{proxy+}":{"id":"{proxy+}","path":"HaulHub-Api-dev/RestApi/Default/{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ProxyResource","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Api-dev/RestApi/Default/{proxy+}/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["RestApi0C43BF4B","RootResourceId"]},"pathPart":"{proxy+}","restApiId":{"Ref":"RestApi0C43BF4B"}}}},"OPTIONS":{"id":"OPTIONS","path":"HaulHub-Api-dev/RestApi/Default/{proxy+}/OPTIONS","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Api-dev/RestApi/Default/{proxy+}/OPTIONS/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token'","method.response.header.Access-Control-Allow-Origin":"'https://d23ld7dtwui8dz.cloudfront.net'","method.response.header.Vary":"'Origin'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'","method.response.header.Access-Control-Allow-Credentials":"'true'","method.response.header.Access-Control-Max-Age":"'3600'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Vary":true,"method.response.header.Access-Control-Allow-Methods":true,"method.response.header.Access-Control-Allow-Credentials":true,"method.response.header.Access-Control-Max-Age":true}}],"resourceId":{"Ref":"RestApiproxyC95856DD"},"restApiId":{"Ref":"RestApi0C43BF4B"}}}}}},"ANY":{"id":"ANY","path":"HaulHub-Api-dev/RestApi/Default/{proxy+}/ANY","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.224.0","metadata":[]},"children":{"ApiPermission.HaulHubApidevRestApi63E3E05D.ANY..{proxy+}":{"id":"ApiPermission.HaulHubApidevRestApi63E3E05D.ANY..{proxy+}","path":"HaulHub-Api-dev/RestApi/Default/{proxy+}/ANY/ApiPermission.HaulHubApidevRestApi63E3E05D.ANY..{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["BackendFunction63314140","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:131451030564:",{"Ref":"RestApi0C43BF4B"},"/",{"Ref":"RestApiDeploymentStagedevDA121244"},"/*/*"]]}}}},"ApiPermission.Test.HaulHubApidevRestApi63E3E05D.ANY..{proxy+}":{"id":"ApiPermission.Test.HaulHubApidevRestApi63E3E05D.ANY..{proxy+}","path":"HaulHub-Api-dev/RestApi/Default/{proxy+}/ANY/ApiPermission.Test.HaulHubApidevRestApi63E3E05D.ANY..{proxy+}","constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["BackendFunction63314140","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:131451030564:",{"Ref":"RestApi0C43BF4B"},"/test-invoke-stage/*/*"]]}}}},"Resource":{"id":"Resource","path":"HaulHub-Api-dev/RestApi/Default/{proxy+}/ANY/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"ANY","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["BackendFunction63314140","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST","timeoutInMillis":29000},"resourceId":{"Ref":"RestApiproxyC95856DD"},"restApiId":{"Ref":"RestApi0C43BF4B"}}}}}}}},"ANY":{"id":"ANY","path":"HaulHub-Api-dev/RestApi/Default/ANY","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Api-dev/RestApi/Default/ANY/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"ANY","integration":{"type":"MOCK"},"resourceId":{"Fn::GetAtt":["RestApi0C43BF4B","RootResourceId"]},"restApiId":{"Ref":"RestApi0C43BF4B"}}}}}}}}}},"ApiUrl":{"id":"ApiUrl","path":"HaulHub-Api-dev/ApiUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"ApiId":{"id":"ApiId","path":"HaulHub-Api-dev/ApiId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"LambdaFunctionArn":{"id":"LambdaFunctionArn","path":"HaulHub-Api-dev/LambdaFunctionArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"LambdaFunctionName":{"id":"LambdaFunctionName","path":"HaulHub-Api-dev/LambdaFunctionName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"HaulHub-Api-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"HaulHub-Api-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.224.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"HaulHub-Api-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.224.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"HaulHub-Api-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.224.0"}}}},"HaulHub-Frontend-dev":{"id":"HaulHub-Frontend-dev","path":"HaulHub-Frontend-dev","constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.224.0"},"children":{"FrontendBucket":{"id":"FrontendBucket","path":"HaulHub-Frontend-dev/FrontendBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Frontend-dev/FrontendBucket/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketEncryption":{"serverSideEncryptionConfiguration":[{"serverSideEncryptionByDefault":{"sseAlgorithm":"AES256"}}]},"bucketName":"haulhub-frontend-dev","publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":true,"ignorePublicAcls":true,"restrictPublicBuckets":true},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"HaulHub"}],"versioningConfiguration":{"status":"Enabled"}}}},"Policy":{"id":"Policy","path":"HaulHub-Frontend-dev/FrontendBucket/Policy","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Frontend-dev/FrontendBucket/Policy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"FrontendBucketEFE2E19C"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["FrontendBucketEFE2E19C","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["FrontendBucketEFE2E19C","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Condition":{"StringEquals":{"AWS:SourceArn":{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":cloudfront::",{"Ref":"AWS::AccountId"},":distribution/",{"Ref":"Distribution830FAC52"}]]}}},"Effect":"Allow","Principal":{"Service":"cloudfront.amazonaws.com"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["FrontendBucketEFE2E19C","Arn"]},"/*"]]}}],"Version":"2012-10-17"}}}}}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"HaulHub-Frontend-dev/FrontendBucket/AutoDeleteObjectsCustomResource","constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.224.0","metadata":[]},"children":{"Default":{"id":"Default","path":"HaulHub-Frontend-dev/FrontendBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.224.0"}}}}}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"HaulHub-Frontend-dev/Custom::S3AutoDeleteObjectsCustomResourceProvider","constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.224.0"},"children":{"Staging":{"id":"Staging","path":"HaulHub-Frontend-dev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.224.0"}},"Role":{"id":"Role","path":"HaulHub-Frontend-dev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.224.0"}},"Handler":{"id":"Handler","path":"HaulHub-Frontend-dev/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.224.0"}}}},"StaticAssetsCachePolicy":{"id":"StaticAssetsCachePolicy","path":"HaulHub-Frontend-dev/StaticAssetsCachePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CachePolicy","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Frontend-dev/StaticAssetsCachePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCachePolicy","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CachePolicy","aws:cdk:cloudformation:props":{"cachePolicyConfig":{"name":"HaulHub-StaticAssets-dev","comment":"Cache policy for static assets (JS, CSS, images)","minTtl":0,"maxTtl":31536000,"defaultTtl":604800,"parametersInCacheKeyAndForwardedToOrigin":{"cookiesConfig":{"cookieBehavior":"none"},"headersConfig":{"headerBehavior":"none"},"enableAcceptEncodingGzip":true,"enableAcceptEncodingBrotli":true,"queryStringsConfig":{"queryStringBehavior":"none"}}}}}}}},"IndexCachePolicy":{"id":"IndexCachePolicy","path":"HaulHub-Frontend-dev/IndexCachePolicy","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CachePolicy","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Frontend-dev/IndexCachePolicy/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnCachePolicy","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::CachePolicy","aws:cdk:cloudformation:props":{"cachePolicyConfig":{"name":"HaulHub-Index-dev","comment":"Cache policy for index.html with short TTL","minTtl":0,"maxTtl":3600,"defaultTtl":300,"parametersInCacheKeyAndForwardedToOrigin":{"cookiesConfig":{"cookieBehavior":"none"},"headersConfig":{"headerBehavior":"none"},"enableAcceptEncodingGzip":true,"enableAcceptEncodingBrotli":true,"queryStringsConfig":{"queryStringBehavior":"none"}}}}}}}},"HostedZone":{"id":"HostedZone","path":"HaulHub-Frontend-dev/HostedZone","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.PublicHostedZone","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Frontend-dev/HostedZone/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnHostedZone","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::HostedZone","aws:cdk:cloudformation:props":{"hostedZoneConfig":{"comment":"HaulHub dev - Managed by CDK"},"name":"haulhub.com.","hostedZoneTags":[{"key":"Component","value":"DNS"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"HaulHub"}]}}}}},"NameServers":{"id":"NameServers","path":"HaulHub-Frontend-dev/NameServers","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"Certificate":{"id":"Certificate","path":"HaulHub-Frontend-dev/Certificate","constructInfo":{"fqn":"aws-cdk-lib.aws_certificatemanager.Certificate","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Frontend-dev/Certificate/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_certificatemanager.CfnCertificate","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CertificateManager::Certificate","aws:cdk:cloudformation:props":{"domainName":"haulhub.com","domainValidationOptions":[{"domainName":"haulhub.com","hostedZoneId":{"Ref":"HostedZoneDB99F866"}},{"domainName":"www.haulhub.com","hostedZoneId":{"Ref":"HostedZoneDB99F866"}}],"subjectAlternativeNames":["www.haulhub.com"],"tags":[{"key":"Component","value":"Certificate"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Name","value":"HaulHub-Frontend-dev/Certificate"},{"key":"Project","value":"HaulHub"}],"validationMethod":"DNS"}}}}},"CertificateArn":{"id":"CertificateArn","path":"HaulHub-Frontend-dev/CertificateArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"HostedZoneId":{"id":"HostedZoneId","path":"HaulHub-Frontend-dev/HostedZoneId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"Distribution":{"id":"Distribution","path":"HaulHub-Frontend-dev/Distribution","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.Distribution","version":"2.224.0","metadata":[]},"children":{"Origin1":{"id":"Origin1","path":"HaulHub-Frontend-dev/Distribution/Origin1","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"S3OriginAccessControl":{"id":"S3OriginAccessControl","path":"HaulHub-Frontend-dev/Distribution/Origin1/S3OriginAccessControl","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.S3OriginAccessControl","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Frontend-dev/Distribution/Origin1/S3OriginAccessControl/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnOriginAccessControl","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::OriginAccessControl","aws:cdk:cloudformation:props":{"originAccessControlConfig":{"name":"HaulHubFrontenddevDistributiOrigin1S3OriginAccessControl6D3B892E","signingBehavior":"always","signingProtocol":"sigv4","originAccessControlOriginType":"s3"}}}}}}}},"Resource":{"id":"Resource","path":"HaulHub-Frontend-dev/Distribution/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_cloudfront.CfnDistribution","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::CloudFront::Distribution","aws:cdk:cloudformation:props":{"distributionConfig":{"enabled":true,"origins":[{"domainName":{"Fn::GetAtt":["FrontendBucketEFE2E19C","RegionalDomainName"]},"id":"HaulHubFrontenddevDistributionOrigin15F2CA413","s3OriginConfig":{"originAccessIdentity":""},"originAccessControlId":{"Fn::GetAtt":["DistributionOrigin1S3OriginAccessControlEB606076","Id"]}}],"defaultCacheBehavior":{"pathPattern":"*","targetOriginId":"HaulHubFrontenddevDistributionOrigin15F2CA413","allowedMethods":["GET","HEAD","OPTIONS"],"cachedMethods":["GET","HEAD","OPTIONS"],"cachePolicyId":{"Ref":"IndexCachePolicy0755D6FB"},"compress":true,"viewerProtocolPolicy":"redirect-to-https"},"aliases":["haulhub.com","www.haulhub.com"],"cacheBehaviors":[{"pathPattern":"*.js","targetOriginId":"HaulHubFrontenddevDistributionOrigin15F2CA413","cachePolicyId":{"Ref":"StaticAssetsCachePolicyA7AB90E0"},"compress":true,"viewerProtocolPolicy":"redirect-to-https"},{"pathPattern":"*.css","targetOriginId":"HaulHubFrontenddevDistributionOrigin15F2CA413","cachePolicyId":{"Ref":"StaticAssetsCachePolicyA7AB90E0"},"compress":true,"viewerProtocolPolicy":"redirect-to-https"},{"pathPattern":"*.png","targetOriginId":"HaulHubFrontenddevDistributionOrigin15F2CA413","cachePolicyId":{"Ref":"StaticAssetsCachePolicyA7AB90E0"},"compress":true,"viewerProtocolPolicy":"redirect-to-https"},{"pathPattern":"*.jpg","targetOriginId":"HaulHubFrontenddevDistributionOrigin15F2CA413","cachePolicyId":{"Ref":"StaticAssetsCachePolicyA7AB90E0"},"compress":true,"viewerProtocolPolicy":"redirect-to-https"},{"pathPattern":"*.svg","targetOriginId":"HaulHubFrontenddevDistributionOrigin15F2CA413","cachePolicyId":{"Ref":"StaticAssetsCachePolicyA7AB90E0"},"compress":true,"viewerProtocolPolicy":"redirect-to-https"},{"pathPattern":"*.ico","targetOriginId":"HaulHubFrontenddevDistributionOrigin15F2CA413","cachePolicyId":{"Ref":"StaticAssetsCachePolicyA7AB90E0"},"compress":true,"viewerProtocolPolicy":"redirect-to-https"},{"pathPattern":"*.woff","targetOriginId":"HaulHubFrontenddevDistributionOrigin15F2CA413","cachePolicyId":{"Ref":"StaticAssetsCachePolicyA7AB90E0"},"compress":true,"viewerProtocolPolicy":"redirect-to-https"},{"pathPattern":"*.woff2","targetOriginId":"HaulHubFrontenddevDistributionOrigin15F2CA413","cachePolicyId":{"Ref":"StaticAssetsCachePolicyA7AB90E0"},"compress":true,"viewerProtocolPolicy":"redirect-to-https"}],"comment":"HaulHub Frontend Distribution - dev","customErrorResponses":[{"errorCachingMinTtl":300,"errorCode":403,"responseCode":200,"responsePagePath":"/index.html"},{"errorCachingMinTtl":300,"errorCode":404,"responseCode":200,"responsePagePath":"/index.html"}],"defaultRootObject":"index.html","httpVersion":"http2and3","ipv6Enabled":true,"priceClass":"PriceClass_100","viewerCertificate":{"acmCertificateArn":{"Ref":"Certificate4E7ABB08"},"minimumProtocolVersion":"TLSv1.2_2021","sslSupportMethod":"sni-only"}},"tags":[{"key":"Component","value":"Frontend"},{"key":"Environment","value":"dev"},{"key":"ManagedBy","value":"CDK"},{"key":"Project","value":"HaulHub"},{"key":"Purpose","value":"CDN"}]}}}}},"AliasRecord":{"id":"AliasRecord","path":"HaulHub-Frontend-dev/AliasRecord","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.ARecord","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Frontend-dev/AliasRecord/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnRecordSet","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::RecordSet","aws:cdk:cloudformation:props":{"aliasTarget":{"hostedZoneId":{"Fn::FindInMap":["AWSCloudFrontPartitionHostedZoneIdMap",{"Ref":"AWS::Partition"},"zoneId"]},"dnsName":{"Fn::GetAtt":["Distribution830FAC52","DomainName"]}},"comment":"Points to CloudFront distribution","hostedZoneId":{"Ref":"HostedZoneDB99F866"},"name":"haulhub.com.","type":"A"}}}}},"AWSCloudFrontPartitionHostedZoneIdMap":{"id":"AWSCloudFrontPartitionHostedZoneIdMap","path":"HaulHub-Frontend-dev/AWSCloudFrontPartitionHostedZoneIdMap","constructInfo":{"fqn":"aws-cdk-lib.CfnMapping","version":"2.224.0"}},"WwwAliasRecord":{"id":"WwwAliasRecord","path":"HaulHub-Frontend-dev/WwwAliasRecord","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.ARecord","version":"2.224.0","metadata":[]},"children":{"Resource":{"id":"Resource","path":"HaulHub-Frontend-dev/WwwAliasRecord/Resource","constructInfo":{"fqn":"aws-cdk-lib.aws_route53.CfnRecordSet","version":"2.224.0"},"attributes":{"aws:cdk:cloudformation:type":"AWS::Route53::RecordSet","aws:cdk:cloudformation:props":{"aliasTarget":{"hostedZoneId":{"Fn::FindInMap":["AWSCloudFrontPartitionHostedZoneIdMap",{"Ref":"AWS::Partition"},"zoneId"]},"dnsName":{"Fn::GetAtt":["Distribution830FAC52","DomainName"]}},"comment":"Points to CloudFront distribution","hostedZoneId":{"Ref":"HostedZoneDB99F866"},"name":"www.haulhub.com.","type":"A"}}}}},"FrontendBucketName":{"id":"FrontendBucketName","path":"HaulHub-Frontend-dev/FrontendBucketName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"FrontendBucketArn":{"id":"FrontendBucketArn","path":"HaulHub-Frontend-dev/FrontendBucketArn","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"DistributionId":{"id":"DistributionId","path":"HaulHub-Frontend-dev/DistributionId","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"DistributionDomainName":{"id":"DistributionDomainName","path":"HaulHub-Frontend-dev/DistributionDomainName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"FrontendUrl":{"id":"FrontendUrl","path":"HaulHub-Frontend-dev/FrontendUrl","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"DomainName":{"id":"DomainName","path":"HaulHub-Frontend-dev/DomainName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"WwwDomainName":{"id":"WwwDomainName","path":"HaulHub-Frontend-dev/WwwDomainName","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"DeployCommand":{"id":"DeployCommand","path":"HaulHub-Frontend-dev/DeployCommand","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"InvalidationCommand":{"id":"InvalidationCommand","path":"HaulHub-Frontend-dev/InvalidationCommand","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.224.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"HaulHub-Frontend-dev/CDKMetadata","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"},"children":{"Default":{"id":"Default","path":"HaulHub-Frontend-dev/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.224.0"}}}},"BootstrapVersion":{"id":"BootstrapVersion","path":"HaulHub-Frontend-dev/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.224.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"HaulHub-Frontend-dev/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.224.0"}}}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.4.3"}}}}}