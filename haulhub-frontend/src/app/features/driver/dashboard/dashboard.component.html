<div class="dashboard-container">
  <div class="dashboard-header">
    <h1>Driver Dashboard</h1>
    <div class="header-actions">
      <button mat-raised-button color="primary" (click)="onViewAllTrips()">
        <mat-icon>list</mat-icon>
        View All Trips
      </button>
      <button mat-raised-button (click)="onViewPaymentReports()">
        <mat-icon>payments</mat-icon>
        Payment Reports
      </button>
    </div>
  </div>

  <div *ngIf="loading" class="loading-container">
    <mat-spinner></mat-spinner>
  </div>

  <div *ngIf="!loading" class="dashboard-content">
    <!-- Summary Cards -->
    <div class="summary-cards">
      <mat-card class="summary-card">
        <mat-card-content>
          <div class="card-icon">
            <mat-icon>local_shipping</mat-icon>
          </div>
          <div class="card-info">
            <div class="card-value">{{ tripSummary.total }}</div>
            <div class="card-label">Total Trips</div>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="summary-card">
        <mat-card-content>
          <div class="card-icon scheduled">
            <mat-icon>schedule</mat-icon>
          </div>
          <div class="card-info">
            <div class="card-value">{{ tripSummary.scheduled }}</div>
            <div class="card-label">Scheduled</div>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="summary-card">
        <mat-card-content>
          <div class="card-icon in-progress">
            <mat-icon>directions_car</mat-icon>
          </div>
          <div class="card-info">
            <div class="card-value">{{ tripSummary.inProgress }}</div>
            <div class="card-label">In Progress</div>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="summary-card">
        <mat-card-content>
          <div class="card-icon delivered">
            <mat-icon>check_circle</mat-icon>
          </div>
          <div class="card-info">
            <div class="card-value">{{ tripSummary.delivered }}</div>
            <div class="card-label">Delivered</div>
          </div>
        </mat-card-content>
      </mat-card>

      <mat-card class="summary-card earnings">
        <mat-card-content>
          <div class="card-icon">
            <mat-icon>attach_money</mat-icon>
          </div>
          <div class="card-info">
            <div class="card-value">{{ formatCurrency(tripSummary.totalEarnings) }}</div>
            <div class="card-label">Total Earnings</div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Upcoming Trips -->
    <mat-card class="upcoming-trips-card">
      <mat-card-header>
        <mat-card-title>Upcoming Trips</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <div *ngIf="upcomingTrips.length === 0" class="no-trips">
          <mat-icon>info</mat-icon>
          <p>No upcoming trips scheduled</p>
        </div>

        <div *ngIf="upcomingTrips.length > 0" class="trips-list">
          <div *ngFor="let trip of upcomingTrips" class="trip-item" (click)="onViewTrip(trip)">
            <div class="trip-header">
              <div class="trip-route">
                <mat-icon>place</mat-icon>
                <span class="location">{{ trip.pickupLocation }}</span>
                <mat-icon>arrow_forward</mat-icon>
                <span class="location">{{ trip.dropoffLocation }}</span>
              </div>
              <mat-chip [class]="getStatusClass(trip.orderStatus || 'Scheduled')">
                {{ getStatusLabel(trip.orderStatus || 'Scheduled') }}
              </mat-chip>
            </div>
            <div class="trip-details">
              <div class="detail-item">
                <mat-icon>event</mat-icon>
                <span>{{ formatDate(trip.scheduledTimestamp) }}</span>
              </div>
              <div class="detail-item">
                <mat-icon>local_shipping</mat-icon>
                <span>{{ trip.truckId }}</span>
              </div>
              <div class="detail-item">
                <mat-icon>business</mat-icon>
                <span>{{ trip.brokerName }}</span>
              </div>
              <div class="detail-item payment">
                <mat-icon>payments</mat-icon>
                <span>{{ formatCurrency(trip.driverPayment) }}</span>
              </div>
            </div>
          </div>
        </div>

        <div *ngIf="upcomingTrips.length > 0" class="view-all-link">
          <button mat-button color="primary" (click)="onViewAllTrips()">
            View All Trips
            <mat-icon>arrow_forward</mat-icon>
          </button>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
</div>
