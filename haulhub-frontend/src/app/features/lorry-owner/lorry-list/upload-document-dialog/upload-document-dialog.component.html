<h2 mat-dialog-title>Upload Additional Documents</h2>

<mat-dialog-content>
  <div class="dialog-content">
    <p class="lorry-info">
      <strong>Lorry:</strong> {{ data.lorry.lorryId }} - {{ data.lorry.make }} {{ data.lorry.model }}
    </p>

    <p class="instruction">
      Upload additional verification documents for this lorry. Accepted formats: PDF, Word documents, or images (JPG, PNG). Maximum file size: 10MB.
    </p>

    <div class="file-upload-section">
      <input
        type="file"
        #dialogFileInput
        (change)="onFileSelected($event)"
        accept=".pdf,.doc,.docx,.jpg,.jpeg,.png"
        style="display: none;">
      
      <button 
        mat-raised-button 
        color="primary" 
        (click)="dialogFileInput.click()"
        [disabled]="uploading">
        <mat-icon>attach_file</mat-icon>
        Choose File
      </button>

      <div *ngIf="selectedFile" class="selected-file">
        <div class="file-info">
          <mat-icon>description</mat-icon>
          <div class="file-details">
            <span class="file-name">{{ selectedFile.name }}</span>
            <span class="file-size">{{ fileSizeDisplay }}</span>
          </div>
        </div>
        <button 
          mat-icon-button 
          color="warn" 
          (click)="removeFile()"
          [disabled]="uploading"
          matTooltip="Remove file">
          <mat-icon>close</mat-icon>
        </button>
      </div>

      <div *ngIf="fileError" class="file-error">
        <mat-icon>error</mat-icon>
        <span>{{ fileError }}</span>
      </div>
    </div>

    <div *ngIf="uploading" class="uploading-indicator">
      <mat-spinner diameter="40"></mat-spinner>
      <p>Uploading document...</p>
    </div>
  </div>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button 
    mat-button 
    (click)="onCancel()"
    [disabled]="uploading">
    Cancel
  </button>
  <button 
    mat-raised-button 
    color="primary" 
    (click)="onUpload()"
    [disabled]="!selectedFile || uploading">
    <mat-icon>upload</mat-icon>
    Upload
  </button>
</mat-dialog-actions>
