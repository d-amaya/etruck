<div class="dashboard-container">
  <h1>Admin Dashboard</h1>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <mat-spinner></mat-spinner>
    <p>Loading dashboard data...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="error && !loading" class="error-container">
    <mat-icon color="warn">error</mat-icon>
    <p>{{ error }}</p>
    <button mat-raised-button color="primary" (click)="loadDashboardData()">
      Retry
    </button>
  </div>

  <!-- Dashboard Content -->
  <div *ngIf="!loading && !error && summary" class="dashboard-content">
    <!-- Pending Verifications Section -->
    <section class="verification-section">
      <h2>Pending Verifications</h2>
      <div class="cards-grid">
        <!-- Pending User Verifications Card -->
        <mat-card class="stat-card clickable" (click)="navigateToUserVerification()">
          <mat-card-header>
            <mat-icon mat-card-avatar color="primary">person</mat-icon>
            <mat-card-title>User Verifications</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="stat-value">{{ summary.pendingUserCount }}</div>
            <div class="stat-label">Pending</div>
          </mat-card-content>
          <mat-card-actions>
            <button mat-button color="primary">
              View All
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </mat-card-actions>
        </mat-card>

        <!-- Pending Lorry Verifications Card -->
        <mat-card class="stat-card clickable" (click)="navigateToLorryVerification()">
          <mat-card-header>
            <mat-icon mat-card-avatar color="primary">local_shipping</mat-icon>
            <mat-card-title>Lorry Verifications</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="stat-value">{{ summary.pendingLorryCount }}</div>
            <div class="stat-label">Pending</div>
          </mat-card-content>
          <mat-card-actions>
            <button mat-button color="primary">
              View All
              <mat-icon>arrow_forward</mat-icon>
            </button>
          </mat-card-actions>
        </mat-card>
      </div>
    </section>

    <!-- System Overview Section -->
    <section class="overview-section">
      <h2>System Overview</h2>
      <div class="cards-grid">
        <!-- Total Users Card -->
        <mat-card class="stat-card">
          <mat-card-header>
            <mat-icon mat-card-avatar color="accent">people</mat-icon>
            <mat-card-title>Total Users</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="stat-value">{{ getTotalUsers() }}</div>
            <div class="stat-label">Registered</div>
          </mat-card-content>
        </mat-card>

        <!-- Users by Role Card -->
        <mat-card class="stat-card users-by-role">
          <mat-card-header>
            <mat-icon mat-card-avatar color="accent">group</mat-icon>
            <mat-card-title>Users by Role</mat-card-title>
          </mat-card-header>
          <mat-card-content>
            <div class="role-breakdown">
              <div class="role-item">
                <span class="role-name">Dispatchers:</span>
                <span class="role-count">{{ summary.usersByRole.Dispatcher }}</span>
              </div>
              <div class="role-item">
                <span class="role-name">Lorry Owners:</span>
                <span class="role-count">{{ summary.usersByRole.LorryOwner }}</span>
              </div>
              <div class="role-item">
                <span class="role-name">Drivers:</span>
                <span class="role-count">{{ summary.usersByRole.Driver }}</span>
              </div>
              <div class="role-item">
                <span class="role-name">Admins:</span>
                <span class="role-count">{{ summary.usersByRole.Admin }}</span>
              </div>
            </div>
          </mat-card-content>
        </mat-card>
      </div>
    </section>

    <!-- Quick Actions Section -->
    <section class="actions-section">
      <h2>Quick Actions</h2>
      <div class="actions-grid">
        <button 
          mat-raised-button 
          color="primary" 
          class="action-button"
          (click)="navigateToUserVerification()">
          <mat-icon>person_add</mat-icon>
          Verify Users
        </button>
        <button 
          mat-raised-button 
          color="primary" 
          class="action-button"
          (click)="navigateToLorryVerification()">
          <mat-icon>verified</mat-icon>
          Verify Lorries
        </button>
        <button 
          mat-raised-button 
          color="primary" 
          class="action-button"
          (click)="navigateToBrokerManagement()">
          <mat-icon>business</mat-icon>
          Manage Brokers
        </button>
      </div>
    </section>
  </div>
</div>
